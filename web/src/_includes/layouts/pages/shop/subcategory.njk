{% extends 'layouts/base/index.njk' %}

{% if banner.ref %}
{% set bannerSrc %}
  {% imageBannerUrlFor banner.ref, 2000 %}
{% endset %}
{% endif %}

{% set crumbsJSON = collections.shop | eleventyNavigationBreadcrumb(eleventyNavigation.key, { includeSelf: true }) %}

{% block content %}
  <section class="w-full overflow-hidden h-[10em] md:h-[14em] lg:h-[18em] relative">
    <div class="w-full h-full md:absolute md:top-1/2 md:-translate-y-1/2 vintage-banner flex">
    {% if bannerSrc %}
      {% bannerImage bannerSrc, banner.alt %}
    {% endif %}
    </div>
    <div class="w-full h-full absolute top-0 left-0 flex flex-col items-center justify-end bg-gradient-to-b from-df-tan via-df-tan/50 to-df-tan/70 items-end">
      <span class="font-df uppercase text-lg md:text-2xl lg:text-3xl">{{ parentTitle }}</span>
      <h1 class="w-full px-2 lg:px-4 flex justify-center mb-4 lg:mb-12 text-5xl md:text-7xl lg:text-8xl text-shadow font-df-sans text-df-orange font-black uppercase">
        {{ title }}
      </h1>
    </div>
  </section>
  <div class="bg-df-black-light -mt-[1vw] -skew-y-[1deg] h-[3vw] min-h-[30px] max-h-[40px] flex flex-col justify-center items-center px-2 lg:px-4">
    <div class="max-w-7xl w-full -skew-x-[1deg]">
      {% crumbs crumbsJSON %}
    </div>
  </div>
  <section class="flex justify-center px-2 lg:px-4">
    <div class="max-w-7xl w-full py-20">
      <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-4 lg:gap-8">
      {% for product in collections.products | categoryFilter(eleventyNavigation.key) %}
        <li data-type="card" class="relative aspect-square overflow-hidden border border-df-black">
          {% if product.data.banner.ref %}
            <div class="absolute h-full flex">
            {% set productSrc %}
              {% imageUrlFor product.data.banner.ref, 1000 %}
            {% endset %}
            {% image productSrc, product.data.title, "(min-width: 640px) 100vw, 50vw", null, 'eager', null, [1500, 1000], 'object-cover h-full' %}
            </div>
          {% endif %}
          <div class="relative z-10 flex w-full h-full flex flex-col justify-between">
          <a class="block w-full text-center font-df-sans font-bold uppercase bg-df-black/90 text-lg text-df-orange py-1 px-2" href="{{ product.url }}">
            {{ product.data.title }}
          </a>
          <div class="text-center bg-df-black/90 text-white text-sm text-zinc-300 py-1 px-2">
            {{ product.data.oneLiner }}
          </div>
          </div>
        </li>
      {% endfor %}
      </ul>
    </div>
  </section>
{% endblock %}
